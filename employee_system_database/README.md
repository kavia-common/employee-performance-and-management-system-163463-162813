# Employee System Database (MySQL)

This container provides the MySQL schema for the Employee Performance & Management System. It includes structures for users, roles, schedules/breaks, attendance (face/GPS/manual), meetings, tasks/projects, notifications, leaves, and analytics.

## Contents

- schema/001_init_schema.sql — full DDL to create all required tables, constraints, indexes, and example views.
- scripts/apply_migrations.sh — applies SQL files in `schema/` in lexical order.
- db_visualizer/mysql.env — environment variables generated by `startup.sh`.

## How to use

1. Start MySQL using the provided startup script (already configured in this container’s environment):
   - It initializes MySQL (if needed), creates the `myapp` database and the `appuser` user, and writes connection variables to `db_visualizer/mysql.env`.
2. Load environment:
   - `source employee_system_database/db_visualizer/mysql.env`
3. Apply schema:
   - `bash employee_system_database/scripts/apply_migrations.sh`

No seed data is included at this stage.

## Integration with Backend

The backend should use the following environment variables (do not hardcode credentials):
- MYSQL_URL
- MYSQL_USER
- MYSQL_PASSWORD
- MYSQL_DB
- MYSQL_PORT

The schema enforces foreign keys, cascades, and unique constraints appropriate for:
- RBAC via `roles`, `users.role_id`, and optional `user_roles`
- Attendance tracking (modalities: face/gps/manual) and detailed events
- Meeting scheduling with participants and RSVP states
- Tasks and projects with comments and attachments
- Leave requests and types with approvals
- Notifications center
- Analytics events (JSON) and daily per-user aggregates

## Notes

- Character set: `utf8mb4_unicode_ci`
- All tables use InnoDB.
- Add future migrations as new numbered files under `schema/` (e.g., `002_add_indexes.sql`) and re-run the migration script.
